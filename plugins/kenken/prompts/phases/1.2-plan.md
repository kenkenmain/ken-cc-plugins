# Phase 1.2: Plan [PHASE 1.2]

## Subagent Config

- **Type:** dispatch (Plan agents, parallel)
- **Input:** `.agents/tmp/kenken/phases/1.1-brainstorm.md`
- **Output:** `.agents/tmp/kenken/phases/1.2-plan.md`

## Instructions

Create a detailed implementation plan with tasks in Task API format, based on the brainstorm output.

### Process

1. Read `.agents/tmp/kenken/phases/1.1-brainstorm.md`
2. Break the selected approach into discrete tasks (each 2-5 minutes of work)
3. For each task, specify:
   - Files to create/modify
   - Exact code changes required
   - How to verify it works
4. Include logging requirements (adopt repo conventions)
5. Build dependency graph between tasks
6. Convert each task to Task API format (see below)

### Task API Format

Every task MUST be written in this YAML format:

```yaml
tasks:
  - id: 1
    description: "Short description (3-5 words)"
    subagent_type: "general-purpose"  # or Bash, Explore, etc.
    prompt: |
      Full prompt for the subagent including:
      - What to implement
      - Files to create/modify
      - Exact code to write
      - How to verify
    dependencies: []  # task IDs this depends on
    complexity: "easy"  # easy, medium, or hard
```

### Task API Field Reference

| Field               | Required | Description                                                             |
| ------------------- | -------- | ----------------------------------------------------------------------- |
| `id`                | Yes      | Unique task identifier (number)                                         |
| `description`       | Yes      | Short description for Task tool (3-5 words)                             |
| `subagent_type`     | Yes      | Agent type: `general-purpose`, `Bash`, `Explore`, etc.                  |
| `prompt`            | Yes      | Full prompt with all context needed                                     |
| `dependencies`      | No       | List of task IDs that must complete first                               |
| `complexity`        | No       | Complexity level: `easy`, `medium`, `hard`                              |
| `model`             | No       | Override model: `sonnet`, `opus`, `haiku`, or versioned like `opus-4.5` |
| `run_in_background` | No       | Run async: `true`/`false`                                               |

### Plan Quality Requirements

- Every task has specific files and exact changes. No ambiguity.
- Every task has verification steps.
- Error handling is explicit â€” not "add later."
- No TODOs or "implement later" placeholders.
- Dependencies are correct. Wrong order = partial state = cascading failure.
- Logging covers key operations, errors, warnings, state changes.

## Output Format

Write to `.agents/tmp/kenken/phases/1.2-plan.md`:

```
# Implementation Plan

## Task
{task description}

## Selected Approach
{from brainstorm recommendation}

## Tasks

{YAML task block in Task API format}

## Dependency Graph
{visual or text representation of task ordering}

## Risk Assessment
{identified risks and mitigations}
```
