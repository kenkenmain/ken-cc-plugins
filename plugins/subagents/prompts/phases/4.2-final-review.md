# Phase 4.2: Final Review [PHASE 4.2]

## Subagent Config

- **Primary:** `state.reviewer` (codex-reviewer or claude-reviewer)
- **Supplementary (parallel):**
  - `subagents:code-quality-reviewer` — final code quality sweep
  - `subagents:test-coverage-reviewer` — test coverage completeness
  - `subagents:comment-reviewer` — comment accuracy and maintainability
- **Criteria:** `prompts/high-stakes/final-review.md`
- **Input:** all phase outputs
- **Output:** `.agents/tmp/phases/4.2-final-review.json`

## Instructions

Perform final holistic review of the entire implementation. Dispatch primary reviewer and supplementary agents in parallel.

### Process

1. Read the review criteria from `prompts/high-stakes/final-review.md`
2. Read all phase outputs: plan (1.2), tasks (2.1), test results (3.1), prior reviews
3. Dispatch primary reviewer and all supplementary agents **in parallel**
4. Aggregate issues from all agents into a single `issues[]` array, tagging each with `"source"` field
5. Write structured JSON result to `.agents/tmp/phases/4.2-final-review.json`

### Output

Write JSON to `.agents/tmp/phases/4.2-final-review.json` with: `status`, `overallQuality`, `issues[]`, `metrics`, `summary`, `readyForCommit`

Each issue in `issues[]` includes `"source": "<agent-type>"`.

### Decision

- `approved` + `readyForCommit: true` -> proceed to completion
- `blocked` -> halt workflow, report to user
