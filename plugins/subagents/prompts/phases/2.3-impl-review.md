# Phase 2.3: Implementation Review [PHASE 2.3]

## Subagent Config

- **Primary:** `state.reviewer` (codex-reviewer or claude-reviewer)
- **Supplementary (parallel):**
  - `subagents:code-quality-reviewer` — code quality, style, project conventions
  - `subagents:error-handling-reviewer` — silent failures, swallowed errors, bad fallbacks
  - `subagents:type-reviewer` — type design, encapsulation, invariants
- **Criteria:** `prompts/high-stakes/implementation.md` (includes test quality review)
- **Input:** `.agents/tmp/phases/1.2-plan.md`, git diff
- **Output:** `.agents/tmp/phases/2.3-impl-review.json`

## Instructions

Review implementation against the plan and high-stakes criteria. Dispatch primary reviewer and supplementary agents in parallel.

### Process

1. Read the review criteria from `prompts/high-stakes/implementation.md`
2. Read the plan from `.agents/tmp/phases/1.2-plan.md`
3. Get list of modified files from `.agents/tmp/phases/2.1-tasks.json`
4. Check `2.1-tasks.json` for `testsWritten` entries — include test quality in review scope
5. Dispatch primary reviewer and all supplementary agents **in parallel**
6. Aggregate issues from all agents into a single `issues[]` array, tagging each with `"source"` field
7. Write structured JSON result to `.agents/tmp/phases/2.3-impl-review.json`

### Output

Write JSON to `.agents/tmp/phases/2.3-impl-review.json` with: `status`, `issues[]`, `filesReviewed`, `summary`

Each issue in `issues[]` includes `"source": "<agent-type>"` (e.g., `"subagents:codex-reviewer"`, `"subagents:error-handling-reviewer"`).

### If Issues Found

Same retry logic as Phase 1.3: fix, re-review, repeat until approved or max retries.
