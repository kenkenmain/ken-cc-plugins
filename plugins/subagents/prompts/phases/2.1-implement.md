# Phase 2.1: Implement [PHASE 2.1]

## Subagent Config

- **Type:** task-agent (wave-based parallel batch)
- **Input:** `.agents/tmp/phases/1.2-plan.md`
- **Output:** `.agents/tmp/phases/2.1-tasks.json`

## Instructions

Execute implementation tasks from the plan in dependency-ordered waves.

### Process

1. Read `.agents/tmp/phases/1.2-plan.md`
2. Parse tasks and build dependency graph
3. Score each task complexity (easy/medium/hard)
4. Dispatch tasks in waves:
   - Wave 1: tasks with no dependencies (parallel)
   - Wave 2: tasks whose deps are complete (parallel)
   - Continue until all done

### Complexity Scoring

| Level  | Criteria                     | Execution                    |
| ------ | ---------------------------- | ---------------------------- |
| Easy   | 1 file, <50 LOC              | task-agent (sonnet)          |
| Medium | 2-3 files, 50-200 LOC        | task-agent (opus)            |
| Hard   | 4+ files, >200 LOC, security | codex-reviewer (codex-xhigh) |

### Task Agent Payload (easy/medium)

```json
{"taskId":"task-N","description":"...","targetFiles":[...],"instructions":"...","dependencyOutputs":[...],"constraints":{"maxReadFiles":10,"maxWriteFiles":3,"allowBashCommands":false}}
```

### Output Format

Write to `.agents/tmp/phases/2.1-tasks.json`:

```json
{
  "waves": [
    {
      "waveNumber": 1,
      "tasks": [{ "id": "task-1", "status": "completed", "summary": "..." }]
    }
  ],
  "completedTasks": ["task-1"],
  "failedTasks": []
}
```

### Error Handling

Failed tasks: mark as failed, skip blocked dependents, continue with others.
